<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=cp936">
    <title>re</title>
    <link rel="stylesheet" type="text/css" href="css/shCoreDefault.css"/>
    <link rel="Stylesheet" type="text/css" href="static/css/wiki.css">
    <link rel="Stylesheet" type="text/css" href="static/bootstrap/css/bootstrap.min.css">
    <script type="text/javascript" src="static/js/jquery.min.js"></script>
    <script type="text/javascript" src="static/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="static/js/wiki.js"></script>
    <script type="text/javascript" src="static/js/shCore.js"></script>
    <script type="text/javascript" src="static/js/shBrushPython.js"></script>
    <script type="text/javascript" src="static/js/shBrushCpp.js"></script>
    <script type="text/javascript" src="static/js/shBrushErlang.js"></script>
    <script type="text/javascript" src="static/js/shBrushBash.js"></script>
    <script type="text/javascript" src="static/js/shBrushRuby.js"></script>
    <script type="text/javascript" src="static/js/shBrushSql.js"></script>
    <script type="text/javascript" src="static/js/shBrushJScript.js"></script>
    <script type="text/javascript">SyntaxHighlighter.all();</script>
</head>
<body>
<nav class="navbar navbar-default navbar-inverse" role="navigation">
 <div class="container">
    <div class="navbar-header">
<button data-target=".bs-navbar-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
	<span class="sr-only"></span>
	<span class="icon-bar"></span>
	<span class="icon-bar"></span>
	<span class="icon-bar"></span>
      </button>
	<a class="navbar-brand" href="main.html">Rick's wiki</a>
    </div>
    <div class="collapse navbar-collapse">
	<ul class="nav navbar-nav">
	    <li><a href="main.html">Home</a></li>
	    <li><a href="TODO.html">TODO</a></li>
	</ul>
    </div>
 </div>
</nav>
<div class="container content-body">
    
<h1 id="toc_1">re -- Regular expression operations</h1>
<h2 id="toc_1.1">Special character</h2>
<ul>
<li>
  special character in match pattern
<pre>
.   matches any charcter except a newline
^   matches the start of the string
$   matches the end of the string or just before the newline at the end of the string
*   cause the resulting RE to match 0 or more repetitions of the preceding RE
+   cause the resulting RE to match 1 or more repetitions of the preceding RE
?   cause the resulting RE to match 0 or 1 repetitions of the preceding RE
*?, +?, ??  matches as few characters as possible  
{m}         matches exactly m copies of the previous RE
{m,n}       matehces from m to n repetitions of the preceding RE
{m,n}?      matehces from m to n repetitions of the preceding RE, as few as possible
\           escapes special characters
[]          indicate a set of characters,[a-z], [abc], [1-9], [(*&amp;^)]
A|B         matches either A or B

(...)       matches whatever regular expression is inside the parentheses and group the matched content.
(?...)      
(?iLmsux)   为正则表达式指定编译选项, i(ignorecase), L(Local), m(Multiline), s(Dotall), u(Unicode), x(Verbose)
(?P&lt;name&gt;...)   为一个匹配的组起一个名字
(?P=name)       调用已匹配的命名组

(?#...)     A comment, ignore the content in the parentheses， 正则表达式中的注释，不进行匹配
(?=...)     matches if ... matches next, Issac(?=Asimov) --match--&gt; IsaacAsimov
(?!...)     matches if ... doesn't match next, issac(?!Asimov) --not match--&gt; isaacAsimov
(?&lt;=...)    matches if ... matches before, (?&lt;=abc)def --match--&gt; abcdef, match string is def
(?&lt;!...)    matches if ... doesn't match before
(?(id/name)yes-pattern|no-pattern)
</pre>
<pre  class = "brush: python">
1. 
&gt;&gt;&gt; s=r’/* comment 1 */  code  /* comment 2 */’
&gt;&gt;&gt; re.findall( r’(?&lt;=/\*).+?(?=\*/)’ , s )
[' comment 1 ', ' comment 2 ']

2. 
&gt;&gt;&gt; re.findall( r’\d+(?!\w+)’ , s )
['222']

3.
&gt;&gt;&gt; s='aaa111aaa,bbb222,333ccc,444ddd444,555eee666,fff777ggg'
&gt;&gt;&gt; re.findall( r'([a-z]+)\d+([a-z]+)' , s )        #找出中间夹有数字的字母
[('aaa', 'aaa'), ('fff', 'ggg')]

&gt;&gt;&gt; re.findall( r '(?P&lt;g1&gt;[a-z]+)\d+(?P=g1)' , s )  #找出被中间夹有数字的前后同样的字母
['aaa']

&gt;&gt;&gt; re.findall(r'([a-z]+)\d+\1',s )                 #匿名组, 通过序号调用已匹配的组
['aaa']

4. 
</pre>

<li>
  special sequences consist of \
<pre>
\number matches the contents of the group of the same number. (.+) \1 -match-&gt; 'the the' or '55 55'
\A  matches only at the start of the string, 和'^'不同之处是它只匹配整个字符串的开头，而不是行开头
\Z  matches only at the end of the string, 和'$'不同之处是它只匹配整个字符串的尾部，而不是行尾
\b  matches the empty string, but only at the beginning or end of a word, boundary(nonalpah) of a word
    r'\bfoo\b'  -match-&gt; 'foo', 'foo.', '(foo)'
                -not match -&gt;   'foobar'
\B  matches the empty string, but only when it is not at the beginning or end of a word
    r'\Bfoo\B'  -match-&gt; 'foobar', 'wufoobar'
                -not match -&gt; 'foo.', '(foo)'
\d  [0-9]
\D  [^0-9]
\s  matches any whitespace character, [\t\n\r\f\v]
\S  matches any non-whitespace character, [^\t\n\r\f\v]
\w  [a-zA-Z0-9]
\W  [^a-zA-Z0-9]
</pre>

</ul>
<h2 id="toc_1.2">Module contents</h2>
<ul>
<li>
  re.compile(parttern)
<pre class = "brush:python">
#   编译正则表达式，可以提高匹配速度，返回一个编译对象
prog = re.compile(pattern)
result = prog.match(string) 
</pre>

<li>
  re.search(pattern, string, flags=0)
<pre class = "brush:python">
#   在字符串中查找匹配的正则表达式模式，返回MatchObject or None
</pre>

<li>
  re.match
<pre class = "brush:python">
#   在字符串开头位置匹配, 返回MatchObejct or None
</pre>

<li>
  re.split
<pre class = "brush:python">
#   将字符串匹配正则表达式的部分割开并返回一个列表
&gt;&gt;&gt;re.split(r'\W+', 'word, word, word.')
['word', 'word', 'word', '']

&gt;&gt;&gt; re.split(r'(\W+)', 'word, word, word.')
['word', ', ', 'word', ', ', 'word', '.', '']

&gt;&gt;&gt; re.split(r'\W+', 'word, word, word.', 1)
['word', 'word, word.']
</pre>

<li>
  re.findall
<pre class = "brush:python">
#   在字符串中查找所有匹配的子串并组成列表返回
&gt;&gt;&gt; re.findall(r'\w+', 'word, word, word.')
['word', 'word', 'word']
</pre>

<li>
  re.finditer
<pre class = "brush:python">
#   同上，但返回迭代器, 可一个一个处理匹配对象
&gt;&gt;&gt; for item in re.finditer(r'\w+', 'word, word, word.'):
	print item.group(), item.span()

word (0, 4)
word (6, 10)
word (12, 16)
</pre>

<li>
  re.sub(rule, replace, target [,count])
    <br>re.subn(rule, replace, target [,count])
<pre class = "brush:python">
#   字符串替换和修改
&gt;&gt;&gt; str = "hello world, hello world, hello world"
&gt;&gt;&gt; re.sub(r'world', 'earth', str)
'hello earth, hello earth, hello earth'

# 可以指明替换个数
&gt;&gt;&gt; re.sub(r'world', 'earth', str, 2)
'hello earth, hello earth, hello world'

# subn返回一个元组，第一个元素为被替换的字符串，第二个元素是一个数字表明产生了多少次替换
&gt;&gt;&gt; re.subn(r'world', 'earth', str)
('hello earth, hello earth, hello earth', 3)
</pre>

<li>
  re.escape
<pre class = "brush:python">
# 将字符串的的非字母数字的字符以backslashed的形式显示出来
&gt;&gt;&gt; str = "(12*43+1)/5"
&gt;&gt;&gt; re.escape(str)
'\\(12\\*43\\+1\\)\\/5'
</pre>

<li>
  re.purge
<pre class = "brush:python">
#clear the regular expression cache
</pre>

</ul>
<h2 id="toc_1.3">Regular Expression Objects</h2>
<ul>
<li>
  re.RegexObject  正则表达式编译后的对象, 匹配更快

<li>
  prog.search

<li>
  prog.match

<li>
  prog.split

<li>
  prog.findall

<li>
  prog.finditer

<li>
  prog.sub

<li>
  prog.subn

<li>
  prog.flags

<li>
  prog.groups

<li>
  prog.groupindex

<li>
  prog.pattern

</ul>
<h2 id="toc_1.4">Match Object</h2>
<ul>
<li>
  由re.match(...) and re.search(...)返回的对象
<pre class = "brush:python">
#
</pre>

<li>
  m.expand
<pre class = "brush:python">
#
</pre>

<li>
  m.group
<pre class = "brush:python">
#  
&gt;&gt;&gt; m = re.match(r"(\w+) (\w+)", "Isaac Newton, physicist")
&gt;&gt;&gt; m.group(0)       # The entire match
'Isaac Newton'
&gt;&gt;&gt; m.group(1)       # The first parenthesized subgroup.
'Isaac'
&gt;&gt;&gt; m.group(2)       # The second parenthesized subgroup.
'Newton'
&gt;&gt;&gt; m.group(1, 2)    # Multiple arguments give us a tuple.
('Isaac', 'Newton')

#   named groups
&gt;&gt;&gt; m = re.match(r"(?P&lt;first_name&gt;\w+) (?P&lt;last_name&gt;\w+)", "Malcolm Reynolds")
&gt;&gt;&gt; m.group('first_name')
'Malcolm'
&gt;&gt;&gt; m.group('last_name')
'Reynolds'
</pre>

<li>
  m.groups
<pre class = "brush:python">
#   返回元组，包含所有匹配的元素
&gt;&gt;&gt; m = re.match(r"(\d+)\.(\d+)", "24.1632")
&gt;&gt;&gt; m.groups()
('24', '1632')
</pre>

<li>
  m.groupdict
<pre class = "brush:python">
#   返回dictionary包含所有的named subgroups
&gt;&gt;&gt; m = re.match(r"(?P&lt;first_name&gt;\w+) (?P&lt;last_name&gt;\w+)", "Malcolm Reynolds")
&gt;&gt;&gt; m.groupdict()
{'first_name': 'Malcolm', 'last_name': 'Reynolds'}
</pre>

<li>
  m.start, m.end
<pre class = "brush:python">
#   返回匹配字符串在字符串中的位置
&gt;&gt;&gt; email = "tony@tiremove_thisger.net"
&gt;&gt;&gt; m = re.search("remove_this", email)
&gt;&gt;&gt; email[:m.start()] + email[m.end():]
'tony@tiger.net'
</pre>

<li>
  m.span
<pre class = "brush:python">
#   return the 2-tuple (m.start(group), m.end(group))
</pre>

<li>
  m.pos
<pre class = "brush:python">
#
</pre>

<li>
  m.endpos
<pre class = "brush:python">
#
</pre>

<li>
  m.lastindex
<pre class = "brush:python">
#
</pre>

<li>
  m.lastgroup
<pre class = "brush:python">
#
</pre>

<li>
  m.re
<pre class = "brush:python">
#
</pre>

<li>
  m.string
<pre class = "brush:python">
#
</pre>

</ul>
<h2 id="toc_1.5">Examples</h2>
<ul>
<li>
  finding all adverbs and their positions
<pre class = "brush:python">
&gt;&gt;&gt; text = "He was carefully disguised but captured quickly by police."
&gt;&gt;&gt; for m in re.finditer(r"\w+ly", text):
...     print '%02d-%02d: %s' % (m.start(), m.end(), m.group(0))
07-16: carefully
40-47: quickly
</pre>

<li>
  <a href="http://www.tutorialspoint.com/python/python_reg_expressions.htm">http://www.tutorialspoint.com/python/python_reg_expressions.htm</a>

</ul>


   <hr />
   <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'rickhuang'; // required: replace example with your forum shortname

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
</body>
</html>
